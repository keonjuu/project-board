<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="en" >
<!--<head th:replace="fragments/header :: header" />-->
<head>
    <title>게시글 상세 페이지</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/custom.css">
    <link rel="stylesheet" href="/css/comment.css">
    <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="/js/file-upload-new.js"></script>
    <script src="/js/board-button.js"></script>
    <script src="/js/comment-button.js"></script>
</head>
<body>
<script th:inline="javascript">
    var comments = [[${comment}]];
    console.log("result = >> ", comments);

</script>
    <div th:replace="fragments/bodyHeader :: bodyHeader"></div>

    <!-- 댓글 -->
    <div class="container" th:id="CommentBox" style="padding-top: 30px; width: 70%">
        <p class="comment_title g-3 fw-bolder">댓글</p>
<!--        <ul class="comment_list" th:each="comment: ${board.comments}">-->
        <ul class="comment_list" th:each="comment: ${comment}">
            <li th:attr="comment_level=${comment?.level}, comment_no=${comment?.id}, del_yn=${comment?.isDeleted} , board_no = ${board.boardNo}" th:class="${comment?.id}" th:classappend="comment_li" th:id="comment_li_+${comment?.id}"
                th:style="'padding-left: ' + (${comment?.level} * 15) + 'px;'">
                <div th:id="comment_container ">
                    <div th:if="${not #strings.equals(comment.level, 1)}"><strong>&rdsh;</strong></div>
                    <div th:class="comment_box">
                        <div class="comment_nick_box">
                                <span class="writer" th:class="${comment?.regId}">
                                    <span class="nickname" th:text="${comment?.regId}">작성자</span>
                                </span>
                        </div>
                        <div th:class="comment_text_box">
                            <p class="comment_text_view" th:text="${comment?.content}"> 텍스트 입력</p>
                        </div>
                        <div th:class="comment_info_box">
                            <span th:class="comment_info_date" th:text="${#temporals.format(comment?.modTime, 'yyyy-MM-dd HH:mm:ss')}" th:style="'color: #ddd;'">날짜 입력</span>
                            <a role="button" class="comment_write_btn" th:attr="reg_id=${session.loginMember?.email}" th:style="'color: #18bc9c;'">답글쓰기</a>
                            <a role="button" class="comment_delete_btn" th:style="'color: #18bc9c;'">삭제</a>
                            <!--                            <a role="button" id="comment_update_btn">수정</a>-->
                        </div>
                    </div>
                </div>
<!--                <th:block th:replace="fragments/commentTemplate :: children" th:with="children=${comment?.children}" />-->
                <th:block th:include="fragments/commentTemplate_2 :: comment_children" th:with="children=${comment?.children}" />
            </li>
        </ul>
<!--        <ul>
            <li th:each="comment: ${comment}">
                <span th:text="${comment?.content}"></span>
                <th:block th:include="fragments/commentTemplate_2 :: comment_children" th:with="children=${comment?.children}" />
            </li>
        </ul>-->

    <!--댓글 입력창 -->
    <div class="CommentWriter" th:style="${'margin:20px'}">
        <div class="comment_inbox">
            <input class="comment_info" type="hidden" th:attr="board_no= ${board.boardNo}, comment_level= 1, reg_id=${session.loginMember?.email} " />
            <p class="comment_inbox_name" th:text = "${session.loginMember?.email}">댓글작성자</p>
            <textarea class="comment_inbox_text" rows="1" style="overflow: hidden; overflow-wrap: break-word; height: 18px;" placeholder="댓글을 남겨보세요"></textarea>
        </div>
        <div class="register_box" th:style="${'margin: -20px 0 29px;'}">
            <a role='button' class='comment_register'>등록</a>
        </div>
    </div>
    <div th:style="${'padding-bottom:20px'}"></div>
</div>
</body>
</html>
