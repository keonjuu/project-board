<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="en" >

<!--<head th:replace="fragments/header :: header" />-->
<head>
    <title>게시글 상세 페이지</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/board.css">

    <style>
        button{
            display:inline-block;
            margin-inline-end: 5px;
        }
        .form-group textarea{
            min-height: 200px;
        }

        .form-group input:focus, .form-group textarea:focus {
            border: 0.15rem solid var(--bs-info);
        }
        /*input[type=text]*/
        input[type=text], textarea[type=text]{
            width: 100%;
            padding: 12px 20px;
            margin: 8px 0;
            box-sizing: border-box;
            border: none;
            background-color: #ecf0f1;
            /*color: white;*/
        }
    </style>
</head>
<body>
<script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
    function edit(){
        $("input[name='title']").attr("readonly", false);
        $("textarea[name='content']").attr("readonly", false);

        // 저장&삭제 버튼 활성화
        if($("#saveButton").css("display") === "none" && $("#deleteButton").css("display") === "none"){
            $('#saveButton').show();
            $('#deleteButton').show();
            // $('#cancelButton').show();
            $('#editButton').hide();
        }
    }
    function cancel(){
        location.href="/";
    }

    function deleteBoard(boardNo){
        console.log( "boardNo" + boardNo);
        const formObj = $("form");
        formObj.attr("action", "/Board/"+boardNo +"/delete");
        formObj.attr("method", "post");
        formObj.submit();
    }

</script>

<div th:replace="fragments/bodyHeader :: bodyHeader"></div>
<div class="container" style="padding-top: 30px; width: 70%">
    <!--    <div th:replace="fragments/bodyHeader :: bodyHeader"/>-->
    <!--    th:action="@{/Board/{boardNo}/view (boardNo=${board.boardNo}) }"-->
    <form th:object="${boards}" method="post" class = "row g-3 fw-bolder">
            <div class="form-group col-12">
                <h3>
            <span th:if="${#strings.equals(board.getCategory().name(), 'FREE')}" class="form-control-plaintext" th:style="${'display:inline;'}"> 자유게시판</span>
            <span th:if="${#strings.equals(board.getCategory().name(), 'NOTICE')}" class="form-control-plaintext" th:style="${'display:inline;'}">공지사항</span>
            <span th:if="${#strings.equals(board.getCategory().name(), 'QNA')}" class="form-control-plaintext" th:style="${'display:inline;'}">Q&A</span>
                </h3>
            </div>
        <div class="form-group col-12">
            <label th:for="boardNo">게시글 번호</label>
            <span th:text="${board.boardNo}" class="form-control-plaintext" th:style="${'display:inline; margin-inline-start:5px'}"> </span>   <!--th:style="${'display:inline; margin-inline-start:5px'}"-->
        </div>
        <div class="form-group col-6">
            <label th:for="content">작성자</label>
            <span th:text="${board.regId}" class="form-control-plaintext"  > 비어있음 </span>
        </div>
        <div class="form-group col-6">
            <label th:for="content">작성일</label>
            <span th:text="${#temporals.format(board.regTime, 'yyyy-MM-dd HH:mm:ss')}" class="form-control-plaintext" > 비어있음 </span>
        </div>
        <div class="form-group col-6">
            <label th:for="modId">최종수정자</label>
            <span th:text="${board.modId}" class="form-control-plaintext" > 비어있음 </span>
        </div>
        <div class="form-group col-6">
            <label th:for="modTime">최종수정일</label>
            <span th:text="${#temporals.format(board.modTime, 'yyyy-MM-dd HH:mm:ss')}" class="form-control-plaintext" > 비어있음 </span>
        </div>
        <div class="form-group col-12">
            <label class="form-label" th:for="title">제목</label>
            <input type="text" th:field="${board.title}"  class="form-control col-8" readonly>
            <!--      <span th:text="${board.title}" class="form-control" >제목 없음 </span>-->
        </div>
        <div class="form-group col-12">
            <label class="form-label" th:for="content">내용</label>
                <textarea type="text" th:field="${board.content}"  class="form-control" readonly></textarea>
            <!--      <span th:text="${board.content}" class="form-control" > 내용 없음 </span>-->
        </div>
        <div th:style="${'text-align: center'}">
            <button type="button" class="btn btn-success col-auto" id="editButton" th:onclick="edit()"  th:style="${session.loginMember?.email == board.regId? 'display:inline-block' : 'display:none'}" >수정</button>
            <button type="submit" class="btn btn-success col-auto" id="saveButton" style="display:none;">저장</button>
            <button type="button" class="btn btn-danger col-auto" id="deleteButton" style="display:none;" th:onclick="'javascript:deleteBoard('+${board.boardNo}+')'" >삭제</button>
            <!--    th:href="@{/Board/{boardNo}/edit (boardNo=${board.boardNo})}"-->
            <button type="button" class="btn btn-warning col-auto" id="cancelButton" th:onclick="cancel()">목록</button>
        </div>
    </form>
    <br/>
</div> <!-- /container -->

</body>
</html>
